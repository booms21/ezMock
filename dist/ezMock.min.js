!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((t="undefined"!=typeof globalThis?globalThis:t||self).ezMock={})}(this,(function(t){"use strict";var o=function(){return o=Object.assign||function(t){for(var o,e=1,a=arguments.length;e<a;e++)for(var r in o=arguments[e])Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);return t},o.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var e=function(){return Math.floor(16777215*Math.random()).toString(16).padStart(6,"0")},a=function(){var t,o,e=(t=0,o=864e5,Math.floor(Math.random()*(o-t+1))+t),a=new Date(e),r=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0"),c=String(a.getHours()).padStart(2,"0"),l=String(a.getMinutes()).padStart(2,"0"),d=String(a.getSeconds()).padStart(2,"0");return"".concat(r,"-").concat(n,"-").concat(i," ").concat(c,":").concat(l,":").concat(d)},r=function(t,o){var r,n,i,c,l,d,s,m,f,h,g,u,M,p,b=Object.create(null);if(b.id=o,t.objectFieldType.includes("string")&&(b.string=function(t,o){for(var e="!@#$%^&*()_+[]{}|;:,.<>?/~`-=",a=Math.floor(Math.random()*(o-t+1))+t,r="",n=0;n<a;n++)switch(Math.floor(6*Math.random())){case 0:var i=Math.floor(20928*Math.random())+19968;r+=String.fromCharCode(i);break;case 1:var c=Math.floor(20992*Math.random())+19968;r+=String.fromCharCode(c);break;case 2:var l=Math.floor(58*Math.random())+65;r+=String.fromCharCode(l);break;case 3:var d=Math.floor(10*Math.random())+48;r+=String.fromCharCode(d);break;case 4:r+=" ";break;case 5:r+=e[Math.floor(29*Math.random())]}return r}(10,20)),t.objectFieldType.includes("url")&&(b.url=(n=["example.com","test.org","sample.net"],i=["","/path","/path/to/resource"],c=["user@example.com","test@test.org","info@sample.net"],l=(r=["http://","https://"])[Math.floor(Math.random()*r.length)],d=n[Math.floor(Math.random()*n.length)],s=i[Math.floor(Math.random()*i.length)],m=c[Math.floor(Math.random()*c.length)],(Math.random()>.5?"mailto:".concat(m):"")||"".concat(l).concat(d).concat(s))),t.objectFieldType.includes("time")&&(b.time=a()),t.objectFieldType.includes("color")&&(b.color="#".concat(e())),t.objectFieldType.includes("number")&&(b.number=Math.random()>.5?(1e6*Math.random()).toFixed(0):(1e5*Math.random()).toFixed(3),b.number=+b.number),t.objectFieldType.includes("boolean")&&(b.boolean=Math.random()>.5),t.objectFieldType.includes("image")){var y="http://dummyimage.com/".concat((f=200,h=1500,g=200,u=1500,M=Math.floor(Math.random()*(h-f+1))+f,p=Math.floor(Math.random()*(u-g+1))+g,"".concat(M,"x").concat(p)),"/").concat(e());b.image=y}return t.objectFieldType.includes("object")&&(b.object={field1:Math.random().toString(36).substring(7),field2:100*Math.random(),field3:Math.random()>.5}),t.objectFieldType.includes("array")&&(b.array=[Math.random().toString(36).substring(7),100*Math.random(),Math.random()>.5]),t.objectFieldType.includes("base64Image")&&(b.base64Image=function(){var t=Math.floor(102400),o=Math.min(800,Math.sqrt(t)),e=Math.min(600,Math.floor(t/o));if(isNaN(o)||isNaN(e)||o<=0||e<=0)throw new Error("Invalid image dimensions");for(var a=new Uint8ClampedArray(o*e*4),r=0;r<a.length;r+=4)a[r]=Math.floor(256*Math.random()),a[r+1]=Math.floor(256*Math.random()),a[r+2]=Math.floor(256*Math.random()),a[r+3]=255;var n=document.createElement("canvas");n.width=o,n.height=e;var i=n.getContext("2d");if(i){var c=new ImageData(a,o,e);i.putImageData(c,0,0)}return n.toDataURL("image/jpeg")}()),b},n=function(){function t(e){var a=this;this.mock=Promise.resolve({code:"ok",data:[]}),this.config=o(o(o({},t.defaultConfig),e),{isRadomObjectArray:!(null==e?void 0:e.maxObjectArraySize)}),this.config.log&&console.log("ezMock - config:",this.config);var n=Math.ceil(Math.random()*this.config.maxRadomTime),i={code:"ok",data:null};if(this.config.isObject&&(i.data=r(this.config,1)),this.config.isObjectArray){var c=this.config.isRadomObjectArray?Math.ceil(Math.random()*this.config.maxObjectArraySize):this.config.maxObjectArraySize;i.data=[];for(var l=0;l<c;l++){var d=r(this.config,l+1);i.data.push(d)}}this.mock=new Promise((function(t,o){var e,r,c=setTimeout((function(){if(clearTimeout(c),a.config.onlyReject)return o(new Error("ezMock - network error! so run reject"));a.config.isRadomStatus?Math.random()>.4?(a.config.log&&console.log("ezMock - responseData",i),t(i)):o(new Error("ezMock - network error! so run reject")):(a.config.log&&console.log("ezMock - responseData ",i),t(i))}),1e3*(null!==(e=a.config.delayTime)&&void 0!==e?e:n));a.config.log&&console.log("ezMock - delay ",null!==(r=a.config.delayTime)&&void 0!==r?r:n)}))}return t.defaultConfig={isObject:!1,log:!1,maxRadomTime:3,onlyReject:!1,isRadomStatus:!0,isObjectArray:!0,objectFieldType:["string","number","boolean","object","array","time","url","image"],maxObjectArraySize:500},t}(),i=function(t){return new n(t).mock},c=function(t){var o={code:"ok",message:"poll success",data:t.data},e={code:"500",message:"poll failed",data:t.data};return new Promise((function(a,r){var n=0,i=(null==t?void 0:t.maxPollingAttempts)||5,c=(null==t?void 0:t.pollingInterval)||2,l=function(){n++,console.log("Polling attempt ".concat(n)),Math.random()>.4?(console.log("Polling attempt ".concat(n," successful"),o),a(o)):(console.log("Polling attempt ".concat(n," fail, try again..."),e),n<i?setTimeout(l,1e3*c):r(new Error("Polling failed after ".concat(i," attempts"))))};l()}))};"undefined"!=typeof window&&(window.ezMock={Mock:i,Polling:c}),t.Mock=i,t.Polling=c,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ezMock.min.js.map
